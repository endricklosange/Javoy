{% extends 'layout.html.twig' %}
{% block stylesheet %}
  <link rel="stylesheet" href="/assets/css/cart.css">
{% endblock %}

{% block content%}

  <svg xmlns:xlink="http://www.w3.org/1999/xlink" id="wave" style=";transform:rotate(180deg); transition: 0.3s" viewbox="0 0 1440 190" version="1.1" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <lineargradient id="sw-gradient-0" x1="0" x2="0" y1="1" y2="0"><stop stop-color="rgba(98, 1, 29, 1)" offset="0%"/><stop stop-color="rgba(132.509, 46.427, 71.275, 1)" offset="100%"/></lineargradient>
    </defs><path style="transform:translate(0, 0px); opacity:1" fill="url(#sw-gradient-0)" d="M0,152L60,129.8C120,108,240,63,360,60.2C480,57,600,95,720,117.2C840,139,960,146,1080,133C1200,120,1320,89,1440,69.7C1560,51,1680,44,1800,63.3C1920,82,2040,127,2160,142.5C2280,158,2400,146,2520,126.7C2640,108,2760,82,2880,88.7C3000,95,3120,133,3240,145.7C3360,158,3480,146,3600,129.8C3720,114,3840,95,3960,101.3C4080,108,4200,139,4320,142.5C4440,146,4560,120,4680,104.5C4800,89,4920,82,5040,66.5C5160,51,5280,25,5400,31.7C5520,38,5640,76,5760,95C5880,114,6000,114,6120,95C6240,76,6360,38,6480,34.8C6600,32,6720,63,6840,72.8C6960,82,7080,70,7200,72.8C7320,76,7440,95,7560,91.8C7680,89,7800,63,7920,44.3C8040,25,8160,13,8280,15.8C8400,19,8520,38,8580,47.5L8640,57L8640,190L8580,190C8520,190,8400,190,8280,190C8160,190,8040,190,7920,190C7800,190,7680,190,7560,190C7440,190,7320,190,7200,190C7080,190,6960,190,6840,190C6720,190,6600,190,6480,190C6360,190,6240,190,6120,190C6000,190,5880,190,5760,190C5640,190,5520,190,5400,190C5280,190,5160,190,5040,190C4920,190,4800,190,4680,190C4560,190,4440,190,4320,190C4200,190,4080,190,3960,190C3840,190,3720,190,3600,190C3480,190,3360,190,3240,190C3120,190,3000,190,2880,190C2760,190,2640,190,2520,190C2400,190,2280,190,2160,190C2040,190,1920,190,1800,190C1680,190,1560,190,1440,190C1320,190,1200,190,1080,190C960,190,840,190,720,190C600,190,480,190,360,190C240,190,120,190,60,190L0,190Z"/></svg>

  <section class="cart">
 
    <div class="container">
     <div class="breadcrumb">
        <a href="/">Accueil</a>
        <span class="breadcrumb-separator">
          /
        </span>
        <a>Panier</a>
      </div>
      <h1>Panier</h1>

      {% if products is not empty %}
        {% set total = 0 %}

        {% for product in products %}
          {% set total = total + product.price * product.quantity %}
          <div class="row my-3 mx-2 cartCard">
            <div class="col-3">
              <img src="/uploads/{{ product.image }}" width="100" alt="{{product.name}}">
            </div>
            <div class="col-6">
              <h2>{{ product.name }}</h2>
              <p class="cartDescription">{{ product.description }}</p>
              <p class="cartPrice">{{ product.price }}€</p>

              <div class="d-flex">
                <a class="quantity btn btn-primary border-0 me-2" href="/Cart/substract/{{product.id}}">-</a>
                <p>{{ product.quantity }}</p>
                <a class="quantity btn btn-primary border-0 mx-2" href="/Cart/add/{{product.id}}">+</a>
              </div>

            </div>
            <div class="col-3 text-end">

              <p>{{ product.quantity * product.price }}€</p>
              <a class="btn btn-primary border-0" href="/Cart/delete/{{product.id}}">X</a>

            </div>
          </div>

        {% endfor %}
        <div class="row my-3 cartCard totalPrice">
          <h3>Prix total</h3>
          <h4>{{total}}€</h4>
          <div class="text-center">
            <a class="btn btn-primary text-center border-0" href="/order/add">Commander</a>
          </div>
        </div>
      {% else %}
        <div class="alert alert-warning">
          <p>Panier vide</p>
        </div>
      {% endif %}
    </div>
  </div>
</section>
{% endblock %}
